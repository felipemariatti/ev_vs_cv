<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comparador de Veículos</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    
    <style>
        body {
            font-family: sans-serif;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
        }
        .container {
            display: flex;
            gap: 20px;
            width: 100%;
            max-width: 1200px;
        }
        .vehicle-section {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            width: 50%;
        }
        h2 {
            margin-top: 0;
        }
        select {
            width: 100%;
            padding: 8px;
            margin-bottom: 20px;
        }
        .info-display p {
            margin: 5px 0;
        }
        .info-display span {
            font-weight: bold;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="vehicle-section">
        <h2>Veículos Elétricos</h2>
        <select id="electric-models" onchange="displayInfo('electric')">
            <option value="">Carregando modelos...</option>
        </select>
        <div id="electric-info" class="info-display"></div>
    </div>

    <div class="vehicle-section">
        <h2>Veículos a Combustão</h2>
        <select id="combustion-models" onchange="displayInfo('combustion')">
            <option value="">Carregando modelos...</option>
        </select>
        <div id="combustion-info" class="info-display"></div>
    </div>
</div>

<script>
    // URL da sua planilha publicada como CSV
    const csvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTieSyzAPyQ1TQ_IfwWX3tjBfEkGFgROxgcg9RMsspK9OBIDxZSjyE1I6XW12fIDJqIlqxYpaDzJ4pS/pub?output=csv';

    // Variável global para guardar os dados dos veículos depois de carregados
    let vehicleData = [];

    const electricModelsSelect = document.getElementById('electric-models');
    const combustionModelsSelect = document.getElementById('combustion-models');
    const electricInfoDiv = document.getElementById('electric-info');
    const combustionInfoDiv = document.getElementById('combustion-info');

    // Função para carregar e processar o CSV
    function loadCSVData() {
        Papa.parse(csvUrl, {
            download: true,  // Baixa o arquivo do URL
            header: true,    // Trata a primeira linha como cabeçalho (nomes das colunas)
            dynamicTyping: true, // Converte números e booleanos automaticamente
            skipEmptyLines: true,
            complete: function(results) {
                vehicleData = results.data;
                populateSelects(vehicleData);
            },
            error: function(error) {
                console.error("Erro ao carregar o CSV:", error);
                electricModelsSelect.innerHTML = '<option value="">Erro ao carregar dados</option>';
                combustionModelsSelect.innerHTML = '<option value="">Erro ao carregar dados</option>';
            }
        });
    }

    // Função para preencher as listas suspensas (selects)
    function populateSelects(data) {
        // Limpa as opções de "Carregando..."
        electricModelsSelect.innerHTML = '<option value="">Selecione um modelo</option>';
        combustionModelsSelect.innerHTML = '<option value="">Selecione um modelo</option>';

        data.forEach(vehicle => {
            const option = document.createElement('option');
            // Supõe que sua planilha tem uma coluna "Modelo"
            option.value = vehicle.Modelo;
            option.textContent = vehicle.Modelo;

            // IMPORTANTE: Supõe que sua planilha tem uma coluna "Tipo"
            // com os valores "Elétrico" ou "Combustão"
            if (vehicle.Tipo === 'Elétrico') {
                electricModelsSelect.appendChild(option);
            } else if (vehicle.Tipo === 'Combustão') {
                combustionModelsSelect.appendChild(option);
            }
        });
    }

    // Função para exibir as informações do modelo selecionado
    function displayInfo(type) {
        let selectedModelName;
        let infoDiv;
        
        if (type === 'electric') {
            selectedModelName = electricModelsSelect.value;
            infoDiv = electricInfoDiv;
        } else {
            selectedModelName = combustionModelsSelect.value;
            infoDiv = combustionInfoDiv;
        }

        const selectedVehicle = vehicleData.find(v => v.Modelo === selectedModelName);

        if (selectedVehicle) {
            // Usa os nomes das colunas que você especificou
            infoDiv.innerHTML = `
                <p><span>Preço Inicial (R$):</span> ${selectedVehicle['Preço Inicial (R$)'] || 'N/D'}</p>
                <p><span>Consumo (km/kWh ou km/L):</span> ${selectedVehicle['Consumo (km/kWh ou km/L)'] || 'N/D'}</p>
                <p><span>Custo Energia/Combustível (R$/kWh ou R$/L):</span> ${selectedVehicle['Custo Energia/Combustível (R$/kWh ou R$/L)'] || 'N/D'}</p>
                <p><span>Custo Manutenção Anual (R$):</span> ${selectedVehicle['Custo Manutenção Anual (R$)'] || 'N/D'}</p>
                <p><span>Autonomia (km):</span> ${selectedVehicle['Autonomia (km)'] || 'N/D'}</p>
                <p><span>Vida Útil (anos):</span> ${selectedVehicle['Vida Útil (anos)'] || 'N/D'}</p>
            `;
        } else {
            infoDiv.innerHTML = ''; // Limpa se "Selecione um modelo" for escolhido
        }
    }

    // Inicia o carregamento dos dados quando a página abre
    document.addEventListener('DOMContentLoaded', loadCSVData);

</script>

</body>
</html>
